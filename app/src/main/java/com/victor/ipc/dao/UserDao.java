package com.victor.ipc.dao;import java.io.File;import java.io.FileInputStream;import java.io.FileNotFoundException;import java.io.FileOutputStream;import java.io.IOException;import java.io.ObjectInputStream;import java.io.ObjectOutputStream;import java.util.ArrayList;import java.util.List;import com.victor.ipc.data.User;public class UserDao {	public static void regist(User user) {		List<User> users = get();		users.add(user);		save(users);	}	public static User getUser(User user){		List<User> users = get();		return users.get(users.indexOf(user));	}	public static int checkLogin(User user) {		if (!check(user)) {			return 1;// 1 name not exists		} else {			List<User> users = get();			User realUser = users.get(users.indexOf(user));			if (realUser.getPass().equals(user.getPass())) {				return 0;			} else {				return 2; // pass error			}		}	}	public static boolean check(User user) {		List<User> users = get();		if (users.contains(user)){			return true ;		}		return false;	}	private static void save(List<User> users) {		File file = new File("/sdcard/users.data");		try {			FileOutputStream fos = new FileOutputStream(file);			ObjectOutputStream oos = new ObjectOutputStream(fos);			oos.writeObject(users);		} catch (FileNotFoundException e1) {			// TODO Auto-generated catch block			e1.printStackTrace();		} catch (IOException ee) {			// TODO Auto-generated catch block			ee.printStackTrace();		}	}	private static List<User> get(){		List<User> users = new ArrayList<User>();		File file = new File("/sdcard/users.data");		try {			FileInputStream fis = new FileInputStream(file);			ObjectInputStream ois = new ObjectInputStream(fis);			users = (List<User>) ois.readObject();		} catch (FileNotFoundException e) {			// TODO Auto-generated catch block			try {				FileOutputStream fos = new FileOutputStream(file);				ObjectOutputStream oos = new ObjectOutputStream(fos);				oos.writeObject(users);			} catch (FileNotFoundException e1) {				// TODO Auto-generated catch block				e1.printStackTrace();			} catch (IOException ee) {				// TODO Auto-generated catch block				ee.printStackTrace();			}		} catch (IOException e) {			// TODO Auto-generated catch block			e.printStackTrace();		} catch (ClassNotFoundException e) {			// TODO Auto-generated catch block			e.printStackTrace();		}		return users;	}}